{% extends "users/base.html" %} 
{% load static %} 
<link rel="icon" type="image/jpg" href="{% static 'image/icone.jpg' %}">

{% block title %}プロフィールページ{% endblock title %} 

{% block content %} 
<link rel="stylesheet" href="{% static 'css/profile.css' %}"> 
<div class="profile">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <form method="POST" enctype="multipart/form-data" id="profile-form">
                {% csrf_token %}
                <div class="text-center mb-4">
                    <div class="profile-image">
                        <img class="rounded-circle conta-imagem" src="{{ user.profile.avatar.url }}" id="preview-avatar"
                            style="width: 150px; height: 150px; object-fit: cover;" />
                    </div>
                    
                    <!-- 画像ボタン -->
                    <div class="mt-3">
                        <label for="id_avatar" class="btn btn-outline-dark">
                            <i class="fas fa-folder-open mr-2"></i>画像を選択する
                        </label>
                        <input type="file" id="id_avatar" name="{{ profile_form.avatar.name }}" accept="image/*"
                            onchange="previewImage(this)" style="display: none;">
                        <div class="selected-file-name mt-2 text-muted" style="display: none;">
                            <small>選択されたファイル: <span id="file-name"></span></small>
                        </div>
                    </div>
                </div>
               
                <!-- メッセージエリア -->
                <div id="message-area"></div>
                
                <div class="card shadow-sm">
                    <div class="card-body">
                        <div class="campo">
                            <label class="small mb-1">ユーザー名：</label>
                            {{ user_form.username }}
                        </div>
                    </div>
                </div>
                
                <!-- ボタン -->
                <div class="text-center mt-4">
                    <button type="submit" class="btn btn-primary btn-lg mr-2" id="save-button">
                        <i class="fas fa-save mr-2"></i>変更を保存
                    </button>
                    
                    <a href="{% url 'index' %}" class="btn btn-secondary btn-lg">
                        <i class="fas fa-arrow-left mr-2"></i>戻る
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="{% static 'js/profile.js' %}"></script> 
{% endblock content %}